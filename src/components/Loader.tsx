import Image from "next/image";
import React, { useRef } from "react";
import localFont from "next/font/local";
import { useGSAP } from "@gsap/react";
import gsap from "gsap";

const primary = localFont({
  src: "./../app/fonts/AlmarenaNeueDisplay-Regular.otf",
});

function Loader() {
  const LoaderRef = useRef<HTMLDivElement | null>(null);
  useGSAP(
    () => {
      const ctx = gsap.context(() => {
        const timeline = gsap.timeline({
          scrollTrigger: {
            trigger: LoaderRef.current,
          },
        });
        timeline
          .to(
            ".loader-qr",
            {
              opacity: 0,
              duration: 2,

              ease: "power1.inOut",
            },
            "<"
          )
          .to(
            ".loader-logo",
            {
              delay: 1.5,
              opacity: 1,
              duration: 1,

              ease: "power1.inOut",
            },
            "<"
          );
        gsap.to(".line", {
          scaleX: 1,
          duration: 3,

          ease: "power1.inOut",
        });
      }, LoaderRef);

      return () => ctx.revert();
    },

    { scope: LoaderRef }
  );
  return (
    <div
      className="w-full bg-black h-screen hidden lg:flex justify-center items-center absolute z-50"
      ref={LoaderRef}
    >
      <LoaderQR />
      <LoaderSVG />
      <div className="absolute bottom-4 h-6 w-full bg-[#BCA7FF] line origin-left scale-x-0"></div>
    </div>
  );
}

export default Loader;

const LoaderQR = () => {
  return (
    <div
      className={`h-full w-full flex justify-center items-center flex-col gap-10 ${primary.className} loader-qr`}
    >
      <div className="h-60 w-60">
        <Image
          src="/lavender_QR.png"
          alt="qr"
          width={400}
          height={400}
          className=""
        />
      </div>
      <h1 className="text-center text-5xl text-[#BCA7FF]">
        Download the app <br />
        while we curate your experience
      </h1>
    </div>
  );
};

const LoaderSVG = () => {
  return (
    <div className="h-full w-full flex justify-center items-center absolute top-0 left-0 loader-logo opacity-0">
      <svg
        width="264"
        height="106"
        viewBox="0 0 264 106"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M68.007 71.0344C66.2586 71.0344 65.0087 69.9579 64.5897 68.2962C64.3296 67.1185 64.2573 65.1245 64.2573 58.8606L64.2573 56.0357C64.3585 51.7586 64.4163 49.4539 64.4163 49.1143C64.4163 43.6885 63.8455 41.2754 62.0899 38.8478C59.7491 35.7628 55.5009 34.0072 50.2484 34.0072C44.4902 34.0072 40.1553 35.5172 35.2353 39.2596C35.9144 41.5138 36.0661 42.518 36.0661 43.8546C36.0661 44.1003 36.0661 44.5121 35.9794 44.9311L36.9837 44.9311C38.9922 40.7696 42.4817 38.4288 46.6577 38.4288C51.5778 38.4288 54.9951 41.7594 54.9951 46.6C54.9951 49.62 53.5718 50.8699 49.4826 51.8525C43.0453 53.4131 39.3823 54.3884 38.4936 54.7858C34.4911 56.6931 32.3236 60.1104 32.3236 64.6187C32.3236 70.9693 36.8319 75.0441 43.7461 75.0441C48.4061 75.0441 51.9101 73.209 55.4142 68.9536C56.6641 72.79 58.7448 74.3795 62.574 74.3795C65.0882 74.3795 67.1689 73.787 69.5098 72.371L69.5098 70.8827C68.7439 70.9694 68.4188 71.0416 67.9998 71.0416L68.007 71.0344ZM55.248 55.8623C55.248 61.2881 55.1613 63.1304 54.829 64.7921C54.1715 67.9494 51.1732 70.2902 47.6692 70.2902C44.1651 70.2902 41.9977 67.7037 41.9977 63.4555C41.9977 59.5325 43.486 57.1049 46.7444 55.7756C48.4928 55.1181 51.3177 54.1139 55.3275 53.0374C55.2408 54.1139 55.2408 54.5257 55.2408 55.8623L55.248 55.8623Z"
          fill="#BBB0FF"
        />
        <path
          d="M68.007 71.0344C66.2586 71.0344 65.0087 69.9579 64.5897 68.2962C64.3296 67.1185 64.2573 65.1245 64.2573 58.8606L64.2573 56.0357C64.3585 51.7586 64.4163 49.4539 64.4163 49.1143C64.4163 43.6885 63.8455 41.2754 62.0899 38.8478C59.7491 35.7628 55.5009 34.0072 50.2484 34.0072C44.4902 34.0072 40.1553 35.5172 35.2353 39.2596C35.9144 41.5138 36.0661 42.518 36.0661 43.8546C36.0661 44.1003 36.0661 44.5121 35.9794 44.9311L36.9837 44.9311C38.9922 40.7696 42.4817 38.4288 46.6577 38.4288C51.5778 38.4288 54.9951 41.7594 54.9951 46.6C54.9951 49.62 53.5718 50.8699 49.4826 51.8525C43.0453 53.4131 39.3823 54.3884 38.4936 54.7858C34.4911 56.6931 32.3236 60.1104 32.3236 64.6187C32.3236 70.9693 36.8319 75.0441 43.7461 75.0441C48.4061 75.0441 51.9101 73.209 55.4142 68.9536C56.6641 72.79 58.7448 74.3795 62.574 74.3795C65.0882 74.3795 67.1689 73.787 69.5098 72.371L69.5098 70.8827C68.7439 70.9694 68.4188 71.0416 67.9998 71.0416L68.007 71.0344ZM55.248 55.8623C55.248 61.2881 55.1613 63.1304 54.829 64.7921C54.1715 67.9494 51.1732 70.2902 47.6692 70.2902C44.1651 70.2902 41.9977 67.7037 41.9977 63.4555C41.9977 59.5325 43.486 57.1049 46.7444 55.7756C48.4928 55.1181 51.3177 54.1139 55.3275 53.0374C55.2408 54.1139 55.2408 54.5257 55.2408 55.8623L55.248 55.8623Z"
          fill="#BBB0FF"
        />
        <path
          d="M133.493 54.1066C139.165 54.1066 142.835 54.1933 146.498 54.3522C146.585 53.189 146.671 52.0981 146.671 51.679C146.671 40.3361 140.501 33.8337 129.664 33.8337C117.909 33.8337 110.735 41.6727 110.735 54.4389C110.735 67.2051 118.328 74.8707 130.416 74.8707C135.422 74.8707 139.085 73.7942 143.767 70.7959C144.013 69.2859 144.186 68.7007 144.844 67.0317L145.104 66.3743L144.251 65.8686C140.834 68.9536 137.337 70.4491 133.175 70.4491C125.582 70.4491 120.835 64.7054 120.835 55.4504C120.835 55.3637 120.835 54.7712 120.922 54.2872C125.43 54.2005 129.592 54.1138 133.508 54.1138L133.493 54.1066ZM129.57 36.9187C132.988 36.9187 135.328 38.9995 136.398 42.9225C136.903 44.6709 137.077 46.4266 137.25 50.5158C135.242 50.6892 134.649 50.6892 131.319 50.6892L129.151 50.6892C123.48 50.6892 123.068 50.6892 120.987 50.6025C121.32 42.0194 124.578 36.9187 129.57 36.9187Z"
          fill="#BBB0FF"
        />
        <path
          d="M133.493 54.1066C139.165 54.1066 142.835 54.1933 146.498 54.3522C146.585 53.189 146.671 52.0981 146.671 51.679C146.671 40.3361 140.501 33.8337 129.664 33.8337C117.909 33.8337 110.735 41.6727 110.735 54.4389C110.735 67.2051 118.328 74.8707 130.416 74.8707C135.422 74.8707 139.085 73.7942 143.767 70.7959C144.013 69.2859 144.186 68.7007 144.844 67.0317L145.104 66.3743L144.251 65.8686C140.834 68.9536 137.337 70.4491 133.175 70.4491C125.582 70.4491 120.835 64.7054 120.835 55.4504C120.835 55.3637 120.835 54.7712 120.922 54.2872C125.43 54.2005 129.592 54.1138 133.508 54.1138L133.493 54.1066ZM129.57 36.9187C132.988 36.9187 135.328 38.9995 136.398 42.9225C136.903 44.6709 137.077 46.4266 137.25 50.5158C135.242 50.6892 134.649 50.6892 131.319 50.6892L129.151 50.6892C123.48 50.6892 123.068 50.6892 120.987 50.6025C121.32 42.0194 124.578 36.9187 129.57 36.9187Z"
          fill="#BBB0FF"
        />
        <path
          d="M156.164 38.9346L157.169 38.9346C157.169 44.5193 157.082 50.935 156.836 59.2074C156.75 60.9558 156.75 62.7114 156.75 63.5423C156.75 70.8754 160.427 74.7985 167.081 74.7985C169.66 74.7985 172.088 74.2928 175.505 73.1368L175.924 70.3769C174.003 70.9694 172.926 71.1211 171.503 71.1211C169.249 71.1211 167.674 70.2035 166.908 68.4479C166.164 66.7862 165.99 65.2762 165.99 60.3633L165.99 53.0302C166.077 41.8606 166.077 41.6872 166.164 40.1772L166.164 38.9273L167.327 38.9273L170.657 39.014L173.742 39.014L174.66 39.1007C174.487 37.8508 174.487 37.5907 174.487 37.1789C174.487 36.7671 174.487 36.5215 174.66 35.0982L166.164 35.3438C166.337 31.8398 166.409 29.0149 166.409 29.0149C166.583 27.0931 166.742 25.2652 166.821 23.3434L166.908 22.0935L166.409 21.5878C162.818 23.5818 159.495 25.0051 156.822 25.6842C156.909 27.4327 156.909 27.8517 157.068 30.7633C157.241 32.3383 157.241 33.1764 157.241 34.2673L157.241 35.4305L150.739 35.1849C150.912 36.0157 150.912 36.3481 150.912 37.02C150.912 37.7641 150.912 38.2699 150.739 39.1874C151.743 39.0718 153.549 38.9924 156.164 38.9418L156.164 38.9273L156.164 38.9346Z"
          fill="#BBB0FF"
        />
        <path
          d="M156.164 38.9346L157.169 38.9346C157.169 44.5193 157.082 50.935 156.836 59.2074C156.75 60.9558 156.75 62.7114 156.75 63.5423C156.75 70.8754 160.427 74.7985 167.081 74.7985C169.66 74.7985 172.088 74.2928 175.505 73.1368L175.924 70.3769C174.003 70.9694 172.926 71.1211 171.503 71.1211C169.249 71.1211 167.674 70.2035 166.908 68.4479C166.164 66.7862 165.99 65.2762 165.99 60.3633L165.99 53.0302C166.077 41.8606 166.077 41.6872 166.164 40.1772L166.164 38.9273L167.327 38.9273L170.657 39.014L173.742 39.014L174.66 39.1007C174.487 37.8508 174.487 37.5907 174.487 37.1789C174.487 36.7671 174.487 36.5215 174.66 35.0982L166.164 35.3438C166.337 31.8398 166.409 29.0149 166.409 29.0149C166.583 27.0931 166.742 25.2652 166.821 23.3434L166.908 22.0935L166.409 21.5878C162.818 23.5818 159.495 25.0051 156.822 25.6842C156.909 27.4327 156.909 27.8517 157.068 30.7633C157.241 32.3383 157.241 33.1764 157.241 34.2673L157.241 35.4305L150.739 35.1849C150.912 36.0157 150.912 36.3481 150.912 37.02C150.912 37.7641 150.912 38.2699 150.739 39.1874C151.743 39.0718 153.549 38.9924 156.164 38.9418L156.164 38.9273L156.164 38.9346Z"
          fill="#BBB0FF"
        />
        <path
          d="M199.593 74.8707C204.6 74.8707 208.263 73.7797 212.511 71.121C212.684 69.9578 212.93 68.7802 213.674 66.6994L212.756 66.1937C209.997 69.0402 206.586 70.4419 202.75 70.4419C194.499 70.4419 189.334 64.0262 189.334 53.7598C189.334 43.4933 194.001 37.1644 201.175 37.1644C205.683 37.1644 209.426 40.1627 210.43 44.4975L211.68 44.4975C212.012 42.6624 213.016 39.7436 214.18 37.2511C210.351 34.9102 206.167 33.8337 200.915 33.8337C187.585 33.8337 179.074 41.9183 179.074 54.5906C179.074 67.2629 187.087 74.8634 199.586 74.8634L199.6 74.8634L199.593 74.8707Z"
          fill="#BBB0FF"
        />
        <path
          d="M199.593 74.8707C204.6 74.8707 208.263 73.7797 212.511 71.121C212.684 69.9578 212.93 68.7802 213.674 66.6994L212.756 66.1937C209.997 69.0402 206.586 70.4419 202.75 70.4419C194.499 70.4419 189.334 64.0262 189.334 53.7598C189.334 43.4933 194.001 37.1644 201.175 37.1644C205.683 37.1644 209.426 40.1627 210.43 44.4975L211.68 44.4975C212.012 42.6624 213.016 39.7436 214.18 37.2511C210.351 34.9102 206.167 33.8337 200.915 33.8337C187.585 33.8337 179.074 41.9183 179.074 54.5906C179.074 67.2629 187.087 74.8634 199.586 74.8634L199.6 74.8634L199.593 74.8707Z"
          fill="#BBB0FF"
        />
        <path
          d="M223.694 73.7075C225.118 73.7075 226.274 73.7942 228.773 74.0399C228.441 69.1125 228.181 60.6162 228.181 55.0314C228.181 49.4466 228.427 47.1058 229.272 45.025C230.695 41.6077 233.274 39.7726 236.605 39.7726C239.936 39.7726 242.277 41.3476 243.519 44.0208C244.35 45.8559 244.682 48.3556 244.682 53.0229C244.682 60.2043 244.437 67.039 243.852 74.0399C246.677 73.7942 247.854 73.7075 249.104 73.7075C250.441 73.7075 251.51 73.7942 254.183 74.0399C253.937 70.7815 253.764 64.2791 253.764 59.5252C253.764 57.6034 253.764 55.5154 253.851 53.5214C254.024 50.9349 254.096 48.4424 254.096 47.4309C254.096 43.1827 253.005 40.1844 250.506 37.7568C248.1 35.3438 244.661 34.0144 240.918 34.0144C235.666 34.0144 231.678 36.3408 228.174 41.3476C228.224 33.9421 228.521 20.1572 228.745 17.5563C226.823 17.8886 225.985 17.9753 223.817 17.9753C221.65 17.9753 220.487 17.8886 218.391 17.5563C218.897 27.6493 219.049 29.2821 219.049 40.5384C219.049 55.3854 218.803 65.9842 218.391 74.0615C221.065 73.8159 222.221 73.7292 223.644 73.7292L223.68 73.7147L223.694 73.7075Z"
          fill="#BBB0FF"
        />
        <path
          d="M223.694 73.7075C225.118 73.7075 226.274 73.7942 228.773 74.0399C228.441 69.1125 228.181 60.6162 228.181 55.0314C228.181 49.4466 228.427 47.1058 229.272 45.025C230.695 41.6077 233.274 39.7726 236.605 39.7726C239.936 39.7726 242.277 41.3476 243.519 44.0208C244.35 45.8559 244.682 48.3556 244.682 53.0229C244.682 60.2043 244.437 67.039 243.852 74.0399C246.677 73.7942 247.854 73.7075 249.104 73.7075C250.441 73.7075 251.51 73.7942 254.183 74.0399C253.937 70.7815 253.764 64.2791 253.764 59.5252C253.764 57.6034 253.764 55.5154 253.851 53.5214C254.024 50.9349 254.096 48.4424 254.096 47.4309C254.096 43.1827 253.005 40.1844 250.506 37.7568C248.1 35.3438 244.661 34.0144 240.918 34.0144C235.666 34.0144 231.678 36.3408 228.174 41.3476C228.224 33.9421 228.521 20.1572 228.745 17.5563C226.823 17.8886 225.985 17.9753 223.817 17.9753C221.65 17.9753 220.487 17.8886 218.391 17.5563C218.897 27.6493 219.049 29.2821 219.049 40.5384C219.049 55.3854 218.803 65.9842 218.391 74.0615C221.065 73.8159 222.221 73.7292 223.644 73.7292L223.68 73.7147L223.694 73.7075Z"
          fill="#BBB0FF"
        />
        <path
          d="M263.012 87.1963C259.906 87.0951 160.535 86.9867 89.1254 86.9217C89.2844 95.9238 89.4722 103.864 89.6961 106.002C87.2036 105.757 85.932 105.67 84.1114 105.67C82.1896 105.67 80.853 105.757 78.0931 106.002C78.3171 103.784 78.5121 96.0322 78.6639 86.9073C44.0426 86.8928 18.2139 86.8712 17.3252 86.8712C14.5364 86.8712 6.90704 87.0301 1.89303 87.2035L0.000118259 87.2035C1.40173 83.3382 8.27253 64.9005 12.5496 49.0637C14.7676 40.8924 16.7617 33.4364 17.9249 29.0004C21.4289 15.6995 22.9533 8.81426 24.5789 -1.04223e-05C27.2521 0.968115 28.6682 1.43774 30.6983 1.95793C32.6201 2.47812 33.6966 2.66595 35.7774 2.96217C32.9669 11.0106 30.5755 19.926 26.9197 33.7832C25.063 40.878 16.8989 70.637 14.3847 80.9251C14.7315 80.9396 15.4395 80.9396 15.7357 80.9396C17.5058 80.9396 43.8547 80.9035 78.7361 80.8168C78.9095 69.9073 78.9962 58.3909 78.9962 52.4955C78.9962 41.745 78.7 24.7089 78.1292 18.4522C82.3774 18.7845 87.3698 18.9579 94.0455 18.9579C99.3846 18.9579 105.555 18.7845 109.304 18.4522C109.059 19.7888 108.972 20.5329 108.972 21.6239C108.972 22.6281 109.059 23.2856 109.304 24.7089C104.883 24.2031 96.632 23.878 89.3855 23.7913C89.0531 30.7127 88.9376 45.1551 88.9376 50.5015C89.9274 50.5737 90.9316 50.5737 91.2639 50.5737C96.0106 50.5737 99.5363 50.2413 104.442 49.8295C104.11 51.1661 104.023 51.838 104.023 53.0012C104.023 54.0777 104.11 54.7496 104.442 55.9128C99.4497 55.4938 94.5223 55.2554 88.8581 55.2554L88.8581 57.6685C88.8581 62.3501 88.9303 71.5979 89.0315 80.7879C160.702 80.6145 259.515 80.2821 263.005 79.8703C262.673 81.4453 262.586 83.5261 262.586 84.5375C262.586 85.4551 262.673 86.0475 263.005 87.2107L263.012 87.1963Z"
          fill="#BBB0FF"
        />
        <path
          d="M263.012 87.1963C259.906 87.0951 160.535 86.9867 89.1254 86.9217C89.2844 95.9238 89.4722 103.864 89.6961 106.002C87.2036 105.757 85.932 105.67 84.1114 105.67C82.1896 105.67 80.853 105.757 78.0931 106.002C78.3171 103.784 78.5121 96.0322 78.6639 86.9073C44.0426 86.8928 18.2139 86.8712 17.3252 86.8712C14.5364 86.8712 6.90704 87.0301 1.89303 87.2035L0.000118259 87.2035C1.40173 83.3382 8.27253 64.9005 12.5496 49.0637C14.7676 40.8924 16.7617 33.4364 17.9249 29.0004C21.4289 15.6995 22.9533 8.81426 24.5789 -1.04223e-05C27.2521 0.968115 28.6682 1.43774 30.6983 1.95793C32.6201 2.47812 33.6966 2.66595 35.7774 2.96217C32.9669 11.0106 30.5755 19.926 26.9197 33.7832C25.063 40.878 16.8989 70.637 14.3847 80.9251C14.7315 80.9396 15.4395 80.9396 15.7357 80.9396C17.5058 80.9396 43.8547 80.9035 78.7361 80.8168C78.9095 69.9073 78.9962 58.3909 78.9962 52.4955C78.9962 41.745 78.7 24.7089 78.1292 18.4522C82.3774 18.7845 87.3698 18.9579 94.0455 18.9579C99.3846 18.9579 105.555 18.7845 109.304 18.4522C109.059 19.7888 108.972 20.5329 108.972 21.6239C108.972 22.6281 109.059 23.2856 109.304 24.7089C104.883 24.2031 96.632 23.878 89.3855 23.7913C89.0531 30.7127 88.9376 45.1551 88.9376 50.5015C89.9274 50.5737 90.9316 50.5737 91.2639 50.5737C96.0106 50.5737 99.5363 50.2413 104.442 49.8295C104.11 51.1661 104.023 51.838 104.023 53.0012C104.023 54.0777 104.11 54.7496 104.442 55.9128C99.4497 55.4938 94.5223 55.2554 88.8581 55.2554L88.8581 57.6685C88.8581 62.3501 88.9303 71.5979 89.0315 80.7879C160.702 80.6145 259.515 80.2821 263.005 79.8703C262.673 81.4453 262.586 83.5261 262.586 84.5375C262.586 85.4551 262.673 86.0475 263.005 87.2107L263.012 87.1963Z"
          fill="#BBB0FF"
        />
      </svg>
    </div>
  );
};
